<div class="adminTabs wide100p">
    <nav class="adminNav flex-container alignItemsCenter justifyCenter">
        <button type="button" class="manageUsersButton menu_button menu_button_icon" data-target-tab="usersList">
            <h4 data-i18n="Manager Users">Manage Users</h4>
        </button>
        <button type="button" class="newUserButton menu_button menu_button_icon" data-target-tab="registerNewUserBlock">
            <h4 data-i18n="New User">New User</h4>
        </button>
        <button type="button" class="systemLoadButton menu_button menu_button_icon" data-target-tab="systemLoadBlock">
            <h4 data-i18n="System Load">System Load</h4>
        </button>
        <button type="button" class="invitationCodesButton menu_button menu_button_icon" data-target-tab="invitationCodesBlock">
            <h4 data-i18n="Invitation Codes">Invitation Codes</h4>
        </button>
        <button type="button" class="announcementsButton menu_button menu_button_icon" data-target-tab="announcementsBlock">
            <h4 data-i18n="Announcements">Announcements</h4>
        </button>
        <button type="button" class="emailConfigButton menu_button menu_button_icon" data-target-tab="emailConfigBlock">
            <h4 data-i18n="Email Config">Email Config</h4>
        </button>
        <button type="button" class="oauthConfigButton menu_button menu_button_icon" data-target-tab="oauthConfigBlock">
            <h4 data-i18n="OAuth Config">OAuth Config</h4>
        </button>
        <button type="button" class="defaultConfigButton menu_button menu_button_icon" data-target-tab="defaultConfigBlock">
            <h4 data-i18n="Default Config">Default Config</h4>
        </button>
    </nav>

    <div class="userAccountTemplate template_element">
        <div class="flex-container userAccount alignItemsCenter flexGap10">
            <div class="flex-container flexFlowColumn alignItemsCenter flexNoGap">
                <div class="avatar" title="If a custom avatar is not set, the user's default persona image will be displayed.">
                    <img src="img/ai4.png" alt="avatar">
                </div>
                <div class="flex-container alignItemsCenter">
                    <div class="userAvatarChange right_menu_button" title="Set a custom avatar.">
                        <i class="fa-fw fa-solid fa-image"></i>
                    </div>
                    <div class="userAvatarRemove right_menu_button" title="Remove a custom avatar.">
                        <i class="fa-fw fa-solid fa-trash"></i>
                    </div>
                </div>
                <form>
                    <input type="file" class="avatarUpload" accept="image/*" hidden>
                </form>
            </div>
            <div class="flex1 flex-container flexFlowColumn flexNoGap justifyLeft">
                <div class="flex-container flexGap10 alignItemsCenter">
                    <i class="hasPassword fa-solid fa-lock" title="This account is password protected."></i>
                    <i class="noPassword fa-solid fa-lock-open" title="This account is not password protected."></i>
                    <h3 class="userName margin0"></h3>
                    <small class="userHandle">&nbsp;</small>
                </div>
                <div class="flex-container flexFlowColumn flexNoGap">
                    <span>
                        <span data-i18n="Role:">Role:</span>
                        <span class="userRole"></span>
                    </span>
                    <span>
                        <span data-i18n="Status:">Status:</span>
                        <span class="userStatus">&nbsp;</span>
                    </span>
                    <span>
                        <span data-i18n="Email:">Email:</span>
                        <span class="userEmail">&nbsp;</span>
                    </span>
                    <span>
                        <span data-i18n="Created:">Created:</span>
                        <span class="userCreated">&nbsp;</span>
                    </span>
                    <span>
                        <span data-i18n="Expires:">Expires:</span>
                        <span class="userExpiresAt">&nbsp;</span>
                    </span>
                    <span>
                        <span data-i18n="Storage Size:">Storage Size:</span>
                        <span class="userStorageSize">&nbsp;</span>
                    </span>
                </div>
            </div>
            <div class="flex-container flexFlowColumn">
                <div class="flex-container">
                    <div class="userChangeNameButton menu_button" title="Change user display name.">
                        <i class="fa-fw fa-solid fa-pencil"></i>
                    </div>
                    <div class="userEnableButton menu_button" title="Enable user account.">
                        <i class="fa-fw fa-solid fa-check"></i>
                    </div>
                    <div class="userDisableButton menu_button" title="Disable user account.">
                        <i class="fa-fw fa-solid fa-ban"></i>
                    </div>
                    <div class="userPromoteButton menu_button" title="Promote user to admin.">
                        <i class="fa-fw fa-solid fa-arrow-up"></i>
                    </div>
                    <div class="userDemoteButton menu_button" title="Demote user to regular user.">
                        <i class="fa-fw fa-solid fa-arrow-down"></i>
                    </div>
                </div>
                <div class="flex-container">
                    <div class="userBackupButton menu_button menu_button_icon" title="Download a backup of user data.">
                        <i class="fa-fw fa-solid fa-download"></i>
                    </div>
                    <div class="userChangePasswordButton menu_button" title="Change user password.">
                        <i class="fa-fw fa-solid fa-key"></i>
                    </div>
                    <div class="userClearBackupsButton menu_button warning" title="Clear this user's backups">
                        <i class="fa-fw fa-solid fa-broom"></i>
                    </div>
                    <div class="userDelete menu_button warning" title="Delete user account.">
                        <i class="fa-fw fa-solid fa-trash"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="navTab usersList flex-container flexFlowColumn">
        <div class="flex-container justifyCenter flexGap10" style="margin-bottom: 15px; padding: 10px; border-bottom: 1px solid var(--SmartThemeBorderColor);">
            <button type="button" class="menu_button menu_button_icon warning clearAllBackupsButton">
                <i class="fa-fw fa-solid fa-trash-alt"></i>
                <span>Clear all user backups</span>
            </button>
            <button type="button" class="menu_button menu_button_icon warning deleteInactiveUsersButton">
                <i class="fa-fw fa-solid fa-user-times"></i>
                <span>Delete long inactive users</span>
            </button>
        </div>

        <!-- Scheduled task configuration area -->
        <div class="scheduledTasksSection" style="margin: 20px 0; padding: 20px; background: var(--SmartThemeBlurTintColor); border-radius: 10px; color: var(--SmartThemeBodyColor);">
            <h3 style="margin-top: 0; margin-bottom: 15px; color: var(--SmartThemeBodyColor);">
                <i class="fa-fw fa-solid fa-clock"></i>
                Scheduled task configuration
            </h3>

            <!-- Scheduled cleanup of all user backups -->
            <div class="scheduledTaskItem" style="margin-bottom: 20px; padding: 15px; background: var(--SmartThemeBlurTintColor); border-radius: 8px; border: 1px solid var(--SmartThemeBorderColor); color: var(--SmartThemeBodyColor);">
                <div class="flex-container alignItemsCenter justifySpaceBetween" style="margin-bottom: 15px;">
                    <div>
                        <h4 style="margin: 0 0 5px 0; color: var(--SmartThemeBodyColor);">
                            <i class="fa-fw fa-solid fa-calendar-days"></i>
                            Scheduled cleanup of all user backups
                        </h4>
                        <p style="margin: 0; font-size: 0.9em; opacity: 0.8; color: var(--SmartThemeEmColor);">
                            Automatically clear all user backups on a schedule to free storage.
                        </p>
                    </div>
                    <label class="checkbox_label" style="margin: 0; color: var(--SmartThemeBodyColor);">
                        <input type="checkbox" id="scheduledClearBackupsEnabled" />
                        <span>Enable scheduled task</span>
                    </label>
                </div>

                <div class="flex-container flexFlowColumn flexGap10" id="scheduledClearBackupsConfig" style="display: none; color: var(--SmartThemeBodyColor);">
                    <div class="flex-container flexGap10 alignItemsCenter">
                        <label style="min-width: 120px; color: var(--SmartThemeBodyColor);">Cron expression:</label>
                        <input type="text" id="scheduledClearBackupsCron" class="text_pole flex1"
                               placeholder="Example: 0 2 * * * (daily at 2 AM)"
                               pattern="[0-9\*\-\,\/\s]+">
                        <button type="button" class="menu_button menu_button_icon" id="testScheduledClearBackupsCron" title="Validate Cron expression">
                            <i class="fa-fw fa-solid fa-check"></i>
                            <span>Validate</span>
                        </button>
                    </div>

                    <div class="cronExamples" style="margin-top: 10px; padding: 10px; background: var(--SmartThemeChatTintColor); border-radius: 5px; font-size: 0.85em; color: var(--SmartThemeBodyColor); border: 1px solid var(--SmartThemeBorderColor);">
                        <strong style="color: var(--SmartThemeBodyColor);">Common Cron examples:</strong>
                        <ul style="margin: 5px 0 0 0; padding-left: 20px; color: var(--SmartThemeEmColor);">
                            <li style="margin: 5px 0;"><code style="background: var(--SmartThemeBlurTintColor); padding: 2px 6px; border-radius: 3px; color: var(--SmartThemeQuoteColor); border: 1px solid var(--SmartThemeBorderColor);">0 2 * * *</code> - Runs daily at 2 AM</li>
                            <li style="margin: 5px 0;"><code style="background: var(--SmartThemeBlurTintColor); padding: 2px 6px; border-radius: 3px; color: var(--SmartThemeQuoteColor); border: 1px solid var(--SmartThemeBorderColor);">0 0 * * 0</code> - Runs Sunday at midnight</li>
                            <li style="margin: 5px 0;"><code style="background: var(--SmartThemeBlurTintColor); padding: 2px 6px; border-radius: 3px; color: var(--SmartThemeQuoteColor); border: 1px solid var(--SmartThemeBorderColor);">0 0 1 * *</code> - Runs on the 1st of each month at midnight</li>
                            <li style="margin: 5px 0;"><code style="background: var(--SmartThemeBlurTintColor); padding: 2px 6px; border-radius: 3px; color: var(--SmartThemeQuoteColor); border: 1px solid var(--SmartThemeBorderColor);">0 */6 * * *</code> - Runs every 6 hours</li>
                            <li style="margin: 5px 0;"><code style="background: var(--SmartThemeBlurTintColor); padding: 2px 6px; border-radius: 3px; color: var(--SmartThemeQuoteColor); border: 1px solid var(--SmartThemeBorderColor);">0 0 0 * * 0</code> - Runs Sunday at midnight</li>
                        </ul>
                        <p style="margin: 5px 0 0 0; opacity: 0.9; color: var(--SmartThemeEmColor);">
                            Cron format: <code style="background: var(--SmartThemeBlurTintColor); padding: 2px 6px; border-radius: 3px; color: var(--SmartThemeQuoteColor); border: 1px solid var(--SmartThemeBorderColor);">minute hour day month weekday</code>
                        </p>
                    </div>

                    <div class="flex-container flexGap10" style="margin-top: 10px;">
                        <button type="button" class="menu_button menu_button_icon" id="saveScheduledClearBackups">
                            <i class="fa-fw fa-solid fa-save"></i>
                            <span>Save configuration</span>
                        </button>
                        <button type="button" class="menu_button menu_button_icon" id="testScheduledClearBackups" title="Run a cleanup task now (test)">
                            <i class="fa-fw fa-solid fa-play"></i>
                            <span>Run now</span>
                        </button>
                        <button type="button" class="menu_button menu_button_icon" id="loadScheduledClearBackups">
                            <i class="fa-fw fa-solid fa-sync"></i>
                            <span>Refresh status</span>
                        </button>
                    </div>

                    <div id="scheduledClearBackupsStatus" style="margin-top: 10px; padding: 10px; border-radius: 5px; display: none;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="navTab registerNewUserBlock" style="display: none;">
        <form class="flex-container flexFlowColumn flexGap10 userCreateForm" action="javascript:void(0);">
            <div class="flex-container flexNoGap">
                <span data-i18n="Display Name:">Display Name:</span>
                <span class="warning">*</span>
                <input name="_name" class="createUserDisplayName text_pole" type="text" placeholder="e.g. John Snow" autocomplete="username">
            </div>
            <div class="flex-container flexNoGap">
                <span data-i18n="User Handle:">User Handle:</span>
                <span class="warning">*</span>
                <input name="handle" class="createUserHandle text_pole" placeholder="e.g. john-snow (lowercase letters, numbers, and dashes only)" type="text" pattern="[a-z0-9-]+">
            </div>
            <div class="flex-container flexNoGap">
                <span data-i18n="Password:">Password:</span>
                <input name="password" class="createUserPassword text_pole" type="password" placeholder="[ No password ]" autocomplete="new-password">
            </div>
            <div class="flex-container flexNoGap">
                <span data-i18n="Confirm Password:">Confirm Password:</span>
                <input name="confirm" class="createUserConfirmPassword text_pole" type="password" placeholder="[ No password ]" autocomplete="new-password">
            </div>
            <span data-i18n="This will create a new subfolder...">
                This will create a new subfolder in the /data/ directory with the user's handle as the folder name.
            </span>
            <div class="flex-container justifyCenter">
                <button type="submit" class="menu_button menu_button_icon newUserRegisterFinalizeButton">
                    <i class="fa-fw fa-solid fa-user-plus"></i>
                    <span data-i18n="Create">Create</span>
                </button>
            </div>
        </form>

    </div>

    <!-- System Load tab -->
    <div class="navTab systemLoadBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="System Load Monitoring">System Load Monitoring</h3>

            <!-- System overview -->
            <div class="systemOverview flex-container flexGap20">
                <div class="systemCard flex1">
                    <h4>CPU Usage</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="cpuUsage">--</span>
                        <span class="metricUnit">%</span>
                    </div>
                    <div class="progressBar">
                        <div class="progressFill" id="cpuProgress" style="width: 0%"></div>
                    </div>
                </div>

                <div class="systemCard flex1">
                    <h4>Memory Usage</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="memoryUsage">--</span>
                        <span class="metricUnit">%</span>
                    </div>
                    <div class="progressBar">
                        <div class="progressFill" id="memoryProgress" style="width: 0%"></div>
                    </div>
                </div>

                <div class="systemCard flex1">
                    <h4>Active Users</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="activeUsers">--</span>
                        <span class="metricUnit">users</span>
                    </div>
                    <div class="metricSubtext" id="activeUsersSummary">--</div>
                </div>

                <div class="systemCard flex1">
                    <h4>Uptime</h4>
                    <div class="systemMetric">
                        <span class="metricValue" id="uptime">--</span>
                    </div>
                </div>
            </div>

            <!-- User stats -->
            <div class="userActivitySection">
                <h4>User stats</h4>
                <div class="userActivityList" id="userActivityList">
                    <!-- User stats will load here -->
                </div>
            </div>

            <style>
                .userActivityControls {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 15px;
                    padding: 10px;
                    background: var(--SmartThemeBlurTintColor);
                    border-radius: 10px;
                }

                .userActivityListContent {
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                }

                .metricSubtext {
                    margin-top: 4px;
                    font-size: 0.85em;
                    color: var(--gray20);
                }

                .paginationControls {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 10px;
                    margin: 15px 0;
                    flex-wrap: wrap;
                }

                .paginationControls .menu_button {
                    min-width: 40px;
                    padding: 8px 12px;
                }

                .pagination-btn:hover {
                    background: var(--SmartThemeBlurTintColor);
                    transform: translateY(-2px);
                    transition: all 0.2s;
                }

                .userCount {
                    font-size: 0.9em;
                    padding: 5px 10px;
                    background: var(--black30a);
                    border-radius: 5px;
                }
            </style>

            <!-- Action buttons -->
            <div class="flex-container justifyCenter flexGap10">
                <button type="button" class="menu_button menu_button_icon" id="refreshSystemLoad">
                    <i class="fa-fw fa-solid fa-refresh"></i>
                    <span data-i18n="Refresh">Refresh data</span>
                </button>
                <button type="button" class="menu_button menu_button_icon warning" id="clearSystemStats">
                    <i class="fa-fw fa-solid fa-trash"></i>
                    <span data-i18n="Clear Stats">Clear stats</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Invitation Codes tab -->
    <div class="navTab invitationCodesBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="Invitation Code Management">Invitation Codes</h3>

            <!-- Instructions -->
            <div class="usage-notice" style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; padding: 10px; margin-bottom: 15px;">
                <h4 style="margin-top: 0; color: #856404;">
                    <i class="fa-fw fa-solid fa-info-circle"></i>
                    Instructions
                </h4>
                <p style="margin: 5px 0; color: #856404;">
                    <strong>Invitation codes toggle:</strong> Invitation codes are disabled by default and must be enabled via the config file.
                </p>
                <p style="margin: 5px 0; color: #856404;">
                    Add the following config to <code>.\config.yaml</code> in the project root:
                </p>
                <pre style="background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 3px; padding: 8px; margin: 5px 0; font-family: monospace; font-size: 12px;">enableInvitationCodes: true</pre>
                <p style="margin: 5px 0; color: #856404;">
                    Restart the server after saving the configuration to enable invitation codes.
                </p>
            </div>

            <!-- Purchase link settings -->
            <div class="purchaseLinkSection">
                <h4>Renewal code purchase link</h4>
                <p style="opacity: 0.7; font-size: 0.9em; margin-bottom: 10px;">
                    Set the link where users can purchase renewal codes. Users see it when expired or renewing.
                </p>
                <form class="flex-container flexGap10 alignItemsCenter purchaseLinkForm" action="javascript:void(0);">
                    <div class="flex1">
                        <input name="purchaseLink" class="text_pole wide100p" type="url" placeholder="Example: https://your-shop.com/buy-code" id="purchaseLinkInput">
                    </div>
                    <button type="submit" class="menu_button menu_button_icon">
                        <i class="fa-fw fa-solid fa-save"></i>
                        <span>Save purchase link</span>
                    </button>
                </form>
                <div class="purchaseLinkStatus" style="margin-top: 5px; font-size: 0.9em; display: none;"></div>
            </div>

            <!-- Create invitation code -->
            <div class="createInvitationSection" style="margin-top: 20px;">
                <h4>Create invitation code</h4>

                <!-- Single create -->
                <div class="creation-mode" id="singleCreationMode">
                    <form class="flex-container flexGap10 alignItemsCenter createInvitationForm" action="javascript:void(0);">
                        <div class="flex-container flexNoGap">
                            <span>Validity period:</span>
                            <select name="durationType" class="text_pole">
                                <option value="1day">1 day</option>
                                <option value="1week">1 week</option>
                                <option value="1month" selected>1 month</option>
                                <option value="1quarter">1 quarter</option>
                                <option value="6months">6 months</option>
                                <option value="1year">1 year</option>
                                <option value="permanent">Permanent</option>
                            </select>
                        </div>
                        <button type="submit" class="menu_button menu_button_icon">
                            <i class="fa-fw fa-solid fa-plus"></i>
                            <span data-i18n="Create Code">Create invitation code</span>
                        </button>
                    </form>
                </div>

                <!-- Batch create -->
                <div class="creation-mode" id="batchCreationMode" style="display: none;">
                    <form class="flex-container flexGap10 alignItemsCenter createBatchInvitationForm" action="javascript:void(0);">
                        <div class="flex-container flexNoGap">
                            <span>Quantity:</span>
                            <input name="batchCount" class="text_pole" type="number" placeholder="Batch quantity" min="1" max="100" value="10">
                        </div>
                        <div class="flex-container flexNoGap">
                            <span>Validity period:</span>
                            <select name="batchDurationType" class="text_pole">
                                <option value="1day">1 day</option>
                                <option value="1week">1 week</option>
                                <option value="1month" selected>1 month</option>
                                <option value="1quarter">1 quarter</option>
                                <option value="6months">6 months</option>
                                <option value="1year">1 year</option>
                                <option value="permanent">Permanent</option>
                            </select>
                        </div>
                        <button type="submit" class="menu_button menu_button_icon">
                            <i class="fa-fw fa-solid fa-layer-group"></i>
                            <span data-i18n="Batch Create">Batch create</span>
                        </button>
                    </form>
                </div>

                <!-- Toggle buttons -->
                <div class="creation-toggle flex-container flexGap10">
                    <button type="button" class="menu_button menu_button_icon creation-toggle-btn active" data-mode="single">
                        <i class="fa-fw fa-solid fa-plus"></i>
                        <span>Single create</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon creation-toggle-btn" data-mode="batch">
                        <i class="fa-fw fa-solid fa-layer-group"></i>
                        <span>Batch create</span>
                    </button>
                </div>
            </div>

            <!-- Invitation code list -->
            <div class="invitationCodesList">
                <div class="flex-container alignItemsCenter flexGap10" style="justify-content: space-between; margin-bottom: 10px; flex-wrap: nowrap;">
                    <h4 style="margin: 0; white-space: nowrap;">Existing invitation codes</h4>
                    <div class="flex-container alignItemsCenter" style="gap: 8px; flex-wrap: nowrap;">
                        <span style="white-space: nowrap; font-size: 0.9em;">Type:</span>
                        <select id="invitationTypeFilter" class="text_pole" style="min-width: 90px;">
                            <option value="all">All</option>
                            <option value="1day">1 day</option>
                            <option value="1week">1 week</option>
                            <option value="1month">1 month</option>
                            <option value="1quarter">1 quarter</option>
                            <option value="6months">6 months</option>
                            <option value="1year">1 year</option>
                            <option value="permanent">Permanent</option>
                        </select>
                        <span style="white-space: nowrap; font-size: 0.9em; margin-left: 8px;">Status:</span>
                        <select id="invitationStatusFilter" class="text_pole" style="min-width: 90px;">
                            <option value="all">All</option>
                            <option value="unused">Unused</option>
                            <option value="used">Used</option>
                        </select>
                    </div>
                </div>
                <div class="invitationCodesContainer" id="invitationCodesContainer">
                    <!-- Invitation code list will load here -->
                </div>
            </div>

            <!-- Batch actions -->
            <div class="batch-operations">
                <h4>Batch actions</h4>
                <div class="flex-container justifyCenter flexGap10">
                    <button type="button" class="menu_button menu_button_icon" id="refreshInvitationCodes">
                        <i class="fa-fw fa-solid fa-refresh"></i>
                        <span data-i18n="Refresh">Refresh list</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="selectAllCodes">
                        <i class="fa-fw fa-solid fa-check-square"></i>
                        <span data-i18n="Select All">Select all</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="downloadSelectedCodes">
                        <i class="fa-fw fa-solid fa-download"></i>
                        <span data-i18n="Download Selected">Download selected</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="downloadAllCodes">
                        <i class="fa-fw fa-solid fa-file-download"></i>
                        <span data-i18n="Download All">Download all</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon warning" id="cleanupExpiredCodes">
                        <i class="fa-fw fa-solid fa-broom"></i>
                        <span data-i18n="Cleanup">Clear expired codes</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon warning" id="deleteSelectedCodes">
                        <i class="fa-fw fa-solid fa-trash-alt"></i>
                        <span data-i18n="Delete Selected">Delete selected</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Announcements tab -->
    <div class="navTab announcementsBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="Announcement Management">Announcements</h3>

            <!-- Announcement type toggle -->
            <div class="flex-container justifyCenter flexGap10" style="margin-bottom: 15px;">
                <button type="button" class="menu_button menu_button_icon announcement-type-tab active" data-type="main">
                    <i class="fa-fw fa-solid fa-home"></i>
                    <span>Main site announcements</span>
                </button>
                <button type="button" class="menu_button menu_button_icon announcement-type-tab" data-type="login">
                    <i class="fa-fw fa-solid fa-sign-in-alt"></i>
                    <span>Login page announcements</span>
                </button>
            </div>

            <!-- Main site announcements -->
            <div class="announcement-section" id="mainAnnouncementSection">
                <!-- Create new announcement -->
                <div class="createAnnouncementSection">
                    <h4>Create new announcement</h4>
                    <form class="flex-container flexFlowColumn flexGap10 createAnnouncementForm" action="javascript:void(0);">
                        <div class="flex-container flexNoGap">
                            <span>Title:</span>
                            <input name="title" class="text_pole" type="text" placeholder="Enter announcement title" required>
                        </div>
                        <div class="flex-container flexNoGap">
                            <span>Content:</span>
                            <textarea name="content" class="text_pole" rows="5" placeholder="Enter announcement content" required></textarea>
                        </div>
                        <div class="flex-container alignItemsCenter flexGap10">
                            <label class="flex-container alignItemsCenter flexGap5">
                                <input name="enabled" type="checkbox" checked>
                                <span>Enable now</span>
                            </label>
                            <button type="submit" class="menu_button menu_button_icon">
                                <i class="fa-fw fa-solid fa-plus"></i>
                                <span data-i18n="Create">Create announcement</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Announcement list -->
                <div class="announcementsList">
                    <h4>Existing announcements</h4>
                    <div class="flex-container justifyCenter flexGap10" style="margin-bottom: 15px;">
                        <button type="button" class="menu_button menu_button_icon" id="refreshAnnouncements">
                            <i class="fa-fw fa-solid fa-refresh"></i>
                            <span data-i18n="Refresh">Refresh list</span>
                        </button>
                    </div>
                    <div class="announcementsContainer" id="announcementsContainer">
                        <!-- Announcement list will load here -->
                    </div>
                </div>
            </div>

            <!-- Login page announcements -->
            <div class="announcement-section" id="loginAnnouncementSection" style="display: none;">
                <!-- Create new login page announcements -->
                <div class="createAnnouncementSection">
                    <h4>Create login page announcements</h4>
                    <form class="flex-container flexFlowColumn flexGap10 createLoginAnnouncementForm" action="javascript:void(0);">
                        <div class="flex-container flexNoGap">
                            <span>Title:</span>
                            <input name="title" class="text_pole" type="text" placeholder="Enter announcement title" required>
                        </div>
                        <div class="flex-container flexNoGap">
                            <span>Content:</span>
                            <textarea name="content" class="text_pole" rows="5" placeholder="Enter announcement content" required></textarea>
                        </div>
                        <div class="flex-container alignItemsCenter flexGap10">
                            <label class="flex-container alignItemsCenter flexGap5">
                                <span>Type:</span>
                                <select name="type" class="text_pole" style="width: auto; min-width: 120px;">
                                    <option value="info">Info</option>
                                    <option value="warning">Warning</option>
                                    <option value="success">Success</option>
                                    <option value="error">Error</option>
                                </select>
                            </label>
                            <label class="flex-container alignItemsCenter flexGap5">
                                <input name="enabled" type="checkbox" checked>
                                <span>Enable now</span>
                            </label>
                            <button type="submit" class="menu_button menu_button_icon">
                                <i class="fa-fw fa-solid fa-plus"></i>
                                <span data-i18n="Create">Create announcement</span>
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Login page announcement list -->
                <div class="announcementsList">
                    <h4>Existing login page announcements</h4>
                    <div class="flex-container justifyCenter flexGap10" style="margin-bottom: 15px;">
                        <button type="button" class="menu_button menu_button_icon" id="refreshLoginAnnouncements">
                            <i class="fa-fw fa-solid fa-refresh"></i>
                            <span data-i18n="Refresh">Refresh list</span>
                        </button>
                    </div>
                    <div class="announcementsContainer" id="loginAnnouncementsContainer">
                        <!-- Login page announcements will load here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Email Config tab -->
    <div class="navTab emailConfigBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="Email Configuration">Email service configuration</h3>

            <div class="emailConfigForm">
                <div class="flex-container flexNoGap alignItemsBaseline">
                    <label class="checkbox_label" for="emailEnabled">
                        <input type="checkbox" id="emailEnabled" />
                        <span data-i18n="Enable Email Service">Enable email service</span>
                    </label>
                </div>

                <div class="emailConfigFields" style="margin-top: 15px;">
                    <div class="flex-container flexFlowColumn flexGap10">
                        <div class="flex-container flexNoGap alignItemsCenter">
                            <span data-i18n="SMTP Host:" style="min-width: 120px; display: inline-block;">SMTP Host:</span>
                            <input id="emailSmtpHost" class="text_pole flex1" type="text" placeholder="Example: smtp.gmail.com">
                        </div>

                        <div class="flex-container flexNoGap alignItemsCenter">
                            <span data-i18n="SMTP Port:" style="min-width: 120px; display: inline-block;">SMTP Port:</span>
                            <input id="emailSmtpPort" class="text_pole flex1" type="number" placeholder="587">
                        </div>

                        <div class="flex-container flexNoGap alignItemsBaseline">
                            <label class="checkbox_label" for="emailSmtpSecure">
                                <input type="checkbox" id="emailSmtpSecure" />
                                <span data-i18n="Use SSL/TLS">Use SSL/TLS (usually required for port 465)</span>
                            </label>
                        </div>

                        <div class="flex-container flexNoGap alignItemsCenter">
                            <span data-i18n="SMTP User:" style="min-width: 120px; display: inline-block;">SMTP User:</span>
                            <input id="emailSmtpUser" class="text_pole flex1" type="text" placeholder="your-email@example.com">
                        </div>

                        <div class="flex-container flexNoGap alignItemsCenter">
                            <span data-i18n="SMTP Password:" style="min-width: 120px; display: inline-block;">SMTP Password:</span>
                            <input id="emailSmtpPassword" class="text_pole flex1" type="password" placeholder="Password or app password" autocomplete="new-password">
                        </div>

                        <div class="flex-container flexNoGap alignItemsCenter">
                            <span data-i18n="From Email:" style="min-width: 120px; display: inline-block;">Sender email:</span>
                            <input id="emailFrom" class="text_pole flex1" type="email" placeholder="noreply@example.com">
                        </div>

                        <div class="flex-container flexNoGap alignItemsCenter">
                            <span data-i18n="From Name:" style="min-width: 120px; display: inline-block;">Sender name:</span>
                            <input id="emailFromName" class="text_pole flex1" type="text" placeholder="SillyTavern">
                        </div>
                    </div>
                </div>

                <div class="flex-container justifyCenter flexGap10" style="margin-top: 20px;">
                    <button type="button" class="menu_button menu_button_icon" id="testEmailConfig">
                        <i class="fa-fw fa-solid fa-paper-plane"></i>
                        <span data-i18n="Test Email">Send test email</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="saveEmailConfig">
                        <i class="fa-fw fa-solid fa-save"></i>
                        <span data-i18n="Save">Save configuration</span>
                    </button>
                </div>

                <div class="emailConfigTips" style="margin-top: 20px; padding: 15px; background: var(--SmartThemeBlurTintColor); border-radius: 5px;">
                    <h4>Configuration notes:</h4>
                    <ul style="padding-left: 20px;">
                        <li><strong>Gmail:</strong> Use smtp.gmail.com:587; enable an app password in your Google account.</li>
                        <li><strong>QQ Mail:</strong> Use smtp.qq.com:587 or 465 (enable SSL); requires an authorization code.</li>
                        <li><strong>Tencent Exmail:</strong> Use smtp.exmail.qq.com:465 (SSL required); use your mailbox password.</li>
                        <li><strong>163 Mail:</strong> Use smtp.163.com:465 (SSL) or smtp.163.com:25; requires an authorization code.</li>
                        <li><strong>Outlook:</strong> Use smtp-mail.outlook.com:587</li>
                        <li><strong>‚ö†Ô∏è Port 465 requires the "Use SSL/TLS" option.</strong></li>
                        <li>Configuration is saved to config.yaml. Restart the service to apply changes.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- OAuth Config tab -->
    <div class="navTab oauthConfigBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="OAuth Configuration">OAuth configuration</h3>

            <div class="oauthConfigContainer" style="max-width: 800px; margin: 0 auto;">

                <!-- GitHub OAuth Config -->
                <div class="oauthProvider" style="margin-bottom: 30px; padding: 20px; background: var(--SmartThemeBlurTintColor); border-radius: 8px;">
                    <div class="flex-container alignItemsCenter" style="margin-bottom: 15px;">
                        <i class="fa-brands fa-github" style="font-size: 24px; margin-right: 10px;"></i>
                        <h4 style="margin: 0;">GitHub OAuth</h4>
                    </div>

                    <div class="flex-container flexFlowColumn flexGap5">
                        <label class="checkbox_label">
                            <input type="checkbox" id="oauthGithubEnabled" />
                            <span data-i18n="Enable GitHub OAuth">Enable GitHub sign-in</span>
                        </label>

                        <div class="flex-container flexFlowColumn">
                            <small>Client ID:</small>
                            <input type="text" class="text_pole" id="oauthGithubClientId" placeholder="GitHub OAuth Client ID">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Client Secret:</small>
                            <input type="password" class="text_pole" id="oauthGithubClientSecret" placeholder="GitHub OAuth Client Secret">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Callback URL <span style="color: #9b87f5;">(Leave blank to use the current server host and port.)</span>:</small>
                            <input type="text" class="text_pole" id="oauthGithubCallback" placeholder="Leave blank to use a dynamic URL">
                        </div>

                        <small style="color: var(--SmartThemeQuoteColor); margin-top: 5px;">
                            In <a href="https://github.com/settings/developers" target="_blank">GitHub Developer Settings</a> create an OAuth app to obtain credentials<br>
                            <strong>üí° Tip:</strong>If the callback URL is blank, the system will generate one from the current host and port.
                        </small>
                    </div>
                </div>

                <!-- Discord OAuth Config -->
                <div class="oauthProvider" style="margin-bottom: 30px; padding: 20px; background: var(--SmartThemeBlurTintColor); border-radius: 8px;">
                    <div class="flex-container alignItemsCenter" style="margin-bottom: 15px;">
                        <i class="fa-brands fa-discord" style="font-size: 24px; margin-right: 10px; color: #5865F2;"></i>
                        <h4 style="margin: 0;">Discord OAuth</h4>
                    </div>

                    <div class="flex-container flexFlowColumn flexGap5">
                        <label class="checkbox_label">
                            <input type="checkbox" id="oauthDiscordEnabled" />
                            <span data-i18n="Enable Discord OAuth">Enable Discord sign-in</span>
                        </label>

                        <div class="flex-container flexFlowColumn">
                            <small>Client ID:</small>
                            <input type="text" class="text_pole" id="oauthDiscordClientId" placeholder="Discord Application Client ID">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Client Secret:</small>
                            <input type="password" class="text_pole" id="oauthDiscordClientSecret" placeholder="Discord Application Client Secret">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Callback URL <span style="color: #9b87f5;">(Leave blank to use the current server host and port.)</span>:</small>
                            <input type="text" class="text_pole" id="oauthDiscordCallback" placeholder="Leave blank to use a dynamic URL">
                        </div>

                        <small style="color: var(--SmartThemeQuoteColor); margin-top: 5px;">
                            In <a href="https://discord.com/developers/applications" target="_blank">Discord Developer Portal</a> create an app to obtain credentials<br>
                            <strong>üí° Tip:</strong>If the callback URL is blank, the system will generate one from the current host and port.
                        </small>
                    </div>
                </div>

                <!-- Linux.do OAuth Config -->
                <div class="oauthProvider" style="margin-bottom: 30px; padding: 20px; background: var(--SmartThemeBlurTintColor); border-radius: 8px;">
                    <div class="flex-container alignItemsCenter" style="margin-bottom: 15px;">
                        <i class="fa-brands fa-linux" style="font-size: 24px; margin-right: 10px; color: #FFA500;"></i>
                        <h4 style="margin: 0;">Linux.do OAuth</h4>
                    </div>

                    <div class="flex-container flexFlowColumn flexGap5">
                        <label class="checkbox_label">
                            <input type="checkbox" id="oauthLinuxdoEnabled" />
                            <span data-i18n="Enable Linux.do OAuth">Enable Linux.do sign-in</span>
                        </label>

                        <div class="flex-container flexFlowColumn">
                            <small>Client ID:</small>
                            <input type="text" class="text_pole" id="oauthLinuxdoClientId" placeholder="Linux.do Client ID">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Client Secret:</small>
                            <input type="password" class="text_pole" id="oauthLinuxdoClientSecret" placeholder="Linux.do Client Secret">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Callback URL <span style="color: #9b87f5;">(Leave blank to use the current server host and port.)</span>:</small>
                            <input type="text" class="text_pole" id="oauthLinuxdoCallback" placeholder="Leave blank to use a dynamic URL">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Auth URL:</small>
                            <input type="text" class="text_pole" id="oauthLinuxdoAuthUrl" value="https://connect.linux.do/oauth2/authorize">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>Token URL:</small>
                            <input type="text" class="text_pole" id="oauthLinuxdoTokenUrl" value="https://connect.linux.do/oauth2/token">
                        </div>

                        <div class="flex-container flexFlowColumn">
                            <small>UserInfo URL:</small>
                            <input type="text" class="text_pole" id="oauthLinuxdoUserInfoUrl" value="https://connect.linux.do/oauth2/userinfo">
                        </div>

                        <small style="color: var(--SmartThemeQuoteColor); margin-top: 5px;">
                            In <a href="https://connect.linux.do" target="_blank">Linux.do Connect</a> create an app to obtain credentials<br>
                            <strong>üí° Tip:</strong>If the callback URL is blank, the system will generate one from the current host and port.
                        </small>
                    </div>
                </div>

                <!-- Save buttons -->
                <div class="flex-container justifyCenter flexGap10" style="margin-top: 20px;">
                    <button type="button" class="menu_button menu_button_icon" id="loadOAuthConfig">
                        <i class="fa-fw fa-solid fa-sync"></i>
                        <span data-i18n="Load Configuration">Load configuration</span>
                    </button>
                    <button type="button" class="menu_button menu_button_icon" id="saveOAuthConfig">
                        <i class="fa-fw fa-solid fa-save"></i>
                        <span data-i18n="Save">Save configuration</span>
                    </button>
                </div>

                <div class="oauthConfigTips" style="margin-top: 20px; padding: 15px; background: var(--SmartThemeBlurTintColor); border-radius: 5px;">
                    <h4>‚ö†Ô∏è Important notes:</h4>
                    <ul style="padding-left: 20px;">
                        <li>Configuration is saved in <code>config.yaml</code>.</li>
                        <li>Restart the service after changes.</li>
                        <li>Callback URL must match the OAuth app configuration exactly.</li>
                        <li>If invitation codes are required, OAuth sign-ups must also provide a code.</li>
                        <li>Use HTTPS in production for security.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Default Config tab -->
    <div class="navTab defaultConfigBlock" style="display: none;">
        <div class="flex-container flexFlowColumn flexGap10">
            <h3 data-i18n="Default User Template">Default user template</h3>

            <div class="defaultConfigStatusBox" id="defaultConfigStatus">
                Loading default config status...
            </div>

            <div class="flex-container flexGap10">
                <button type="button" class="menu_button menu_button_icon" id="refreshDefaultConfigStatus">
                    <i class="fa-fw fa-solid fa-sync"></i>
                    <span data-i18n="Refresh">Refresh status</span>
                </button>
                <button type="button" class="menu_button menu_button_icon warning" id="clearDefaultConfig">
                    <i class="fa-fw fa-solid fa-trash"></i>
                    <span data-i18n="Clear">Clear template</span>
                </button>
            </div>

            <div class="defaultConfigSection">
                <h4>Build template from existing user</h4>
                <div class="flex-container flexGap10 alignItemsCenter">
                    <span style="min-width: 90px;">Source user:</span>
                    <select id="defaultConfigSourceUser" class="text_pole flex1"></select>
                    <button type="button" class="menu_button menu_button_icon" id="reloadDefaultConfigUsers">
                        <i class="fa-fw fa-solid fa-rotate"></i>
                        <span>Refresh</span>
                    </button>
                </div>

                <div class="defaultConfigCategories">
                    <div class="defaultConfigCategoryGroup">
                        <h5>Core</h5>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="settings" checked>
                            <span>Settings (settings.json)</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="secrets">
                            <span>API keys (secrets.json)</span>
                        </label>
                    </div>

                    <div class="defaultConfigCategoryGroup">
                        <h5>Presets</h5>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="context" checked>
                            <span>Context templates</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="instruct" checked>
                            <span>Instruction templates</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="sysprompt" checked>
                            <span>System prompts</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="reasoning">
                            <span>Reasoning templates</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="quickreplies">
                            <span>Quick replies</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="openai_settings" checked>
                            <span>OpenAI Presets</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="kobold_settings">
                            <span>KoboldAI Presets</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="novel_settings">
                            <span>NovelAI Presets</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="textgen_settings">
                            <span>TextGen Presets</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="moving_ui">
                            <span>Layout positions (MovingUI)</span>
                        </label>
                    </div>

                    <div class="defaultConfigCategoryGroup">
                        <h5>Content</h5>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="characters" checked>
                            <span>Default character cards</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="worlds">
                            <span>World info / Lorebook</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="backgrounds">
                            <span>Backgrounds</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="themes">
                            <span>Themes</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="avatars">
                            <span>User avatars</span>
                        </label>
                        <label class="checkbox_label">
                            <input type="checkbox" class="defaultConfigCategory" value="assets">
                            <span>Asset files (assets)</span>
                        </label>
                    </div>
                </div>

                <div class="defaultConfigWarning">
                    <i class="fa-fw fa-solid fa-triangle-exclamation"></i>
                    <span>API keys included here will be written to the default template and inherited by new users.</span>
                </div>
                <small style="opacity: 0.75;">Unchecked content will be removed from the template.</small>

                <div class="flex-container justifyCenter flexGap10" style="margin-top: 10px;">
                    <button type="button" class="menu_button menu_button_icon" id="saveDefaultConfig">
                        <i class="fa-fw fa-solid fa-floppy-disk"></i>
                        <span>Save as default config</span>
                    </button>
                </div>

                <small style="opacity: 0.8;">
                    The default template is saved in <code>data/default-template</code> and applied for new user registrations.
                </small>
            </div>
        </div>
    </div>
</div>
